<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leak_Documentation</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h1 id="mood-based-movie-recommendation-system-documentation">Mood-Based Movie Recommendation System Documentation</h1>
<p>This documentation provides an overview of the code for a mood-based movie recommendation system implemented using FastAPI and various data processing libraries. The system recommends movies based on user input, historical movie preferences, and mood analysis.</p>
<h2 id="code-structure">Code Structure</h2>
<p>The code is structured into the following sections:</p>
<ol>
<li>
<p>Import Statements:</p>
<ul>
<li>The code begins with importing necessary Python libraries and modules.</li>
</ul>
</li>
<li>
<p>FastAPI Initialization:</p>
<ul>
<li>An instance of the FastAPI framework is created and named <code>mood_app</code>.</li>
</ul>
</li>
<li>
<p>Data Loading and Preprocessing:</p>
<ul>
<li>Movie data is loaded from CSV files (“movies_metadata.csv” and “top_1000_movie_reviews.csv”).</li>
<li>A subset of movies with the “Thriller” genre is selected for mood analysis.</li>
<li>Initial movie recommendations and user history are generated.</li>
</ul>
</li>
<li>
<p>Sentence Embedding Model:</p>
<ul>
<li>The SentenceTransformer model (“all-mpnet-base-v2”) is loaded to convert movie plot descriptions, reviews, and genres into embeddings.</li>
<li>The device (CPU or CUDA) for processing is determined.</li>
</ul>
</li>
<li>
<p>Utility Functions:</p>
<ul>
<li>Several utility functions are defined for calculating embeddings and mood scores, as well as for recommending movies based on user history and user search.</li>
</ul>
</li>
<li>
<p>Data Preprocessing and Mood Calculation:</p>
<ul>
<li>Movie data is preprocessed and mood scores are calculated for all movies.</li>
<li>User history embeddings and mood scores are computed.</li>
<li>The similarity between user history and movie mood scores is calculated and stored.</li>
</ul>
</li>
<li>
<p>FastAPI Endpoints:</p>
<ul>
<li>
<p>The code defines three FastAPI endpoints:</p>
</li>
<li>
<p><code>/history/</code> (GET):</p>
<ul>
<li>Returns the user’s historical movie preferences in JSON format.</li>
</ul>
</li>
<li>
<p><code>/recommendations/</code> (GET):</p>
<ul>
<li>Recommends movies based on user history and returns the top 10 recommendations in JSON format.</li>
<li>The similarity score is also included.</li>
</ul>
</li>
<li>
<p><code>/search/</code> (POST):</p>
<ul>
<li>Allows users to search for movies based on a mood input.</li>
<li>Returns the top 10 search results with their similarity scores.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Data Serialization:</p>
<ul>
<li>The similarity scores in movie data are converted to float to avoid JSON serialization issues.</li>
</ul>
</li>
<li>
<p>Running the Application:</p>
<ul>
<li>The FastAPI application is run, and it listens for incoming requests.</li>
</ul>
</li>
</ol>
<h2 id="usage">Usage</h2>
<ol>
<li>
<p><code>/history/</code> Endpoint:</p>
<ul>
<li>Access this endpoint via a GET request to retrieve the user’s historical movie preferences.</li>
</ul>
</li>
<li>
<p><code>/recommendations/</code> Endpoint:</p>
<ul>
<li>Access this endpoint via a GET request to get movie recommendations based on user history.</li>
<li>The recommendations are provided in JSON format, including movie titles, IMDb IDs, overviews, similarities, and genres.</li>
</ul>
</li>
<li>
<p><code>/search/</code> Endpoint:</p>
<ul>
<li>Access this endpoint via a POST request, providing a mood input.</li>
<li>The system performs a mood-based search and returns the top 10 search results in JSON format, including movie titles, IMDb IDs, overviews, similarities, and genres.</li>
</ul>
</li>
</ol>
<h2 id="technical-details">Technical Details</h2>
<ul>
<li>The system utilizes SentenceTransformer for semantic text embeddings.</li>
<li>Cosine similarity is used to calculate the similarity between user preferences and movie mood scores.</li>
<li>User history is used to recommend movies with the most similar mood scores.</li>
</ul>
<h2 id="acknowledgments">Acknowledgments</h2>
<p>This code is a simplified example of a mood-based movie recommendation system. It can be extended and improved for production use with additional features, a larger dataset, and further user interaction.</p>
</div>
</body>

</html>
